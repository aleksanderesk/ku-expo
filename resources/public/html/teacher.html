<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Manage Registration</title>
        <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css">
        <link href="/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
        <link href="/css/bootstrap-table.min.css" rel="stylesheet" type="text/css">
        <link href="/css/bootstrapValidator.min.css" rel="stylesheet" type="text/css">
        <link href="/css/bootstrap-duallistbox.min.css" rel="stylesheet" type="text/css">
        <link href="/css/bootstrap-timepicker.min.css" rel="stylesheet" type="text/css">
        <link href="/css/bootstrap-callouts.min.css" rel="stylesheet" type="text/css">
        <script src="/js/jquery-1.11.2.min.js" type="text/javascript"></script>
        <script src="/js/bootstrap.min.js" type="text/javascript"></script>
        <script src="/js/bootstrap-table.min.js" type="text/javascript"></script>
        <script src="/js/bootstrapValidator.min.js" type="text/javascript"></script>
        <script src="/js/jquery.bootstrap-duallistbox.min.js" type="text/javascript"></script>
        <script src="/js/bootstrap-timepicker.min.js" type="text/javascript"></script>
    </head>
    <body>
        <div class="navbar navbar-default">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand" href="/">KU Expo</a>
                </div>
                <div class="navbar-collapse collapse" id="navbar">
                    <ul class="nav navbar-nav">
                        <li>
                            <a href="/teacher">Teacher</a>
                        </li>
                        <li>
                            <a href="/group">Student Group</a>
                        </li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <button class="btn btn-default navbar-btn" type="button">
                                <a href="/logout">Sign Off</a>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="container">
            <ul class="nav nav-tabs" id="operationTabs" role="tablist" style="margin-bottom: 15px;">
                <li class="active">
                    <a data-toggle="tab" href="#general">General</a>
                </li>
                <li>
                    <a data-toggle="tab" href="#school">School</a>
                </li>
                <li>
                    <a data-toggle="tab" href="#students">Students</a>
                </li>
                <li>
                    <a data-toggle="tab" href="#teams">Teams</a>
                </li>
                <li>
                    <a data-toggle="tab" href="#logistics">Logistics</a>
                </li>
            </ul>
            <!-- General Tab -->
            <div class="tab-content" id="content">
                <div class="tab-pane fade active in" id="general" role="tabpanel">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="bs-callout bs-callout-info">
                                <h4>General Instructions</h4>
                                <p>Welcome to the Expo Teacher Registration Application! Registration consists of four components: <span class="text-primary">School</span>, <span class="text-primary">Students</span>, <span class="text-primary">Teams</span>, and <span class="text-primary">Logistics</span>. Please register these components in order by selecting tabs above.</p>
                                <p>After having registered your components, you will be able to edit them at any time by returning to this application.</p>
                                <p>Please note however, in order to prepare for competitions and scheduling, we will be <b>closing</b> registration two days before the first day of Expo. You will still be able to view your registered information from this application, but when registration is closed, you will not be able to edit it. So please finalize your students and teams by <b>February 17</b>. If changes occur in your teams after registration has closed, you may either email the Expo administrators with your changes, or you may bring your changes with you on the days of Expo you attend for Expo administrators to make during morning registration.</p>
                                <p>If you have any questions concerning your registration or Expo in general, email <a href="mailto:tomasgreen@ku.edu">tomasgreen@ku.edu</a>.</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h5>Profile</h5>
                                </div>
                                <div class="panel-body">
                                    <table id="profile-table" data-toggle="table" data-url="/teacher/profile" data-card-view="true" data-cache="false">
                                        <thead>
                                            <tr>
                                                <th data-field="id" data-visible="false">ID</th>
                                                <th data-field="name">Name</th>
                                                <th data-field="email">Email</th>
                                                <th data-field="phone">Phone</th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- School Tab -->
                <div class="tab-pane fade" id="school" role="tabpanel">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="bs-callout bs-callout-info">
                                <h4>School Instructions</h4>
                                <p>Register your school below by clicking the <span class="text-primary">'Add School'</span> button in the Overview header below. Once you have provided the full name and address of your school, it will appear as a row in the Overview table for you to verify.</p>
                                <p>Clicking on the row will open a dialog to edit the school's information or remove the record entirely if necessary.</p> 
                                <p>If you will sponsor multiple schools (e.g. your district's Elementary School <i>and</i> Middle School), you may register each separately.</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="btn-group pull-right">
                                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#newSchool">
                                            <span class="glyphicon glyphicon-plus"></span>
                                            Add School
                                        </button>
                                    </div>
                                    <h5>Overview</h5>
                                </div>
                                <!-- Table -->
                                <div class="panel-body">
                                    <table id="schools-table" data-toggle="table" data-url="/teacher/schools" data-card-view="true" data-cache="false">
                                        <thead>
                                            <tr>
                                                <th data-field="id" data-visible="false">ID</th>
                                                <th data-field="name">School Name</th>
                                                <th data-field="address">Address</th>
                                            </tr>
                                        </thead>
                                    </table>
                                    <script>
                                        $(function() {
                                            $('#schools-table').bootstrapTable().on('click-row.bs.table', function(e, row, $element) {
                                                $('#school-id').val(row.id);
                                                $('#update-school-name').val(row.name);
                                                $('#update-school-address').val(row.address);
                                                $('#updateSchool').modal('toggle');
                                            });
                                        });
                                    </script>
                                </div>
                                <!-- New School Modal -->
                                <div class="modal fade" id="newSchool" tabindex="-1" role="dialog" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                                <h4 class="modal-title">Add School</h4>
                                            </div>
                                            <div class="modal-body">
                                                <form id="newSchoolForm">
                                                    <div class="form-group">
                                                        <label class="control-label">School Name</label>
                                                        <input id="new-school-name" type="text" class="form-control" name="name" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Address</label>
                                                        <input id="new-school-address" type="text" class="form-control" name="address" placeholder="Street, City, State and Zip" />
                                                    </div>
                                                    <div class="form-group">
                                                        <button type="button" onclick="putSchool()" class="btn btn-primary">
                                                            <span class="glyphicon glyphicon-plus"></span>
                                                            Add
                                                        </button>
                                                    </div>
                                                    <script>
                                                        function putSchool() {
                                                            $.ajax({
                                                                    url: '/teacher/schools',
                                                                    type: 'PUT',
                                                                    data: {
                                                                        name: $('#new-school-name').val(),
                                                                        address: $('#new-school-address').val()
                                                                    },
                                                                    success: function(result) {
                                                                        $('#schools-table').bootstrapTable('refresh');
                                                                        $('#newSchool').modal('toggle');
                                                                    }
                                                            });
                                                            $("#newSchoolForm").trigger('reset');
                                                        }
                                                    </script>
                                                </form>
                                                <script type="text/javascript">
                                                    $(document).ready(function() {
                                                        $('#newSchoolForm').bootstrapValidator({
                                                            fields: {
                                                                name: { 
                                                                    validators: {
                                                                        notEmpty: {
                                                                            message: 'School name cannot be empty'
                                                                        }
                                                                    }
                                                                },
                                                                address: {
                                                                    validators: {
                                                                        notEmpty: {
                                                                            message: 'Address cannot be empty'
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        });
                                                    });
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Update School Modal -->
                                <div class="modal fade" id="updateSchool" tabindex="-1" role="dialog" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                                <h4 class="modal-title">Update School</h4>
                                            </div>
                                            <div class="modal-body">
                                                <form id="updateSchoolForm">
                                                    <div class="form-group hidden" aria-hidden="true">
                                                        <label class="control-label">School ID</label>
                                                        <input id="school-id" type="text" class="form-control" name="id" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">School Name</label>
                                                        <input id="update-school-name" type="text" class="form-control" name="name" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Address</label>
                                                        <input id="update-school-address" type="text" class="form-control" name="address" />
                                                    </div>
                                                    <div class="form-group">
                                                        <button type="button" onclick="deleteSchool()" class="btn btn-danger pull-right">
                                                            <span class="glyphicon glyphicon-remove"></span>
                                                            Delete
                                                        </button>
                                                        <button type="button" onclick="postSchool()" class="btn btn-info">
                                                            <span class="glyphicon glyphicon-edit"></span>
                                                            Update
                                                        </button>
                                                    </div>
                                                    <script>
                                                        function deleteSchool() {
                                                            $.ajax({
                                                                    url: '/teacher/schools',
                                                                    type: 'DELETE',
                                                                    data: {
                                                                        id: $('#school-id').val()
                                                                    },
                                                                    success: function(result) {
                                                                        $('#schools-table').bootstrapTable('refresh');
                                                                        $('#updateSchool').modal('toggle');
                                                                    }
                                                            });
                                                        }

                                                        function postSchool() {
                                                            $.ajax({
                                                                    url: '/teacher/schools',
                                                                    type: 'POST',
                                                                    data: {
                                                                        id: $('#school-id').val(),
                                                                        name: $('#update-school-name').val(),
                                                                        address: $('#update-school-address').val()
                                                                    },
                                                                    success: function(result) {
                                                                        $('#schools-table').bootstrapTable('refresh');
                                                                        $('#updateSchool').modal('toggle');
                                                                    }
                                                            });
                                                        }
                                                    </script>
                                                </form>
                                                <script type="text/javascript">
                                                    $(document).ready(function() {
                                                        $('#updateSchoolForm').bootstrapValidator({
                                                            fields: {
                                                                name: { 
                                                                    validators: {
                                                                        notEmpty: {
                                                                            message: 'School name cannot be empty'
                                                                        }
                                                                    }
                                                                },
                                                                address: {
                                                                    validators: {
                                                                        notEmpty: {
                                                                            message: 'Address cannot be empty'
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        });
                                                    });
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Students Tab -->
                <div class="tab-pane fade" id="students" role="tabpanel">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="bs-callout bs-callout-info">
                                <h4>Students Instructions</h4>
                                <p>Register your students below by clicking the <span class="text-primary">'Add Student'</span> button in the Overview header below for each student. Once you have provided the student's full name and school division (i.e. Elementary, Middle, High School), they will appear as a row in the Overview table for you to verify.</p>
                                <p>Clicking on the row will open a dialog to edit the student's information or remove the record entirely if necessary.</p> 
                            </div>
                        </div>
                        <div class="row">
                             <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="btn-group pull-right">
                                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#newStudent">
                                            <span class="glyphicon glyphicon-plus"></span>
                                            Add Student
                                        </button>
                                    </div>
                                    <h5>Overview</h5>
                                </div>
                                <!-- Table -->
                                <div class="panel-body">
                                    <table id="students-table" data-toggle="table" data-url="/teacher/students" data-card-view="true" data-cache="false">
                                        <thead>
                                            <tr>
                                                <th data-field="id" data-visible="false">ID</th>
                                                <th data-field="name">Student's Name</th>
                                                <th data-field="division">Division</th>
                                            </tr>
                                        </thead>
                                    </table>
                                    <script>
                                        $(function() {
                                            $('#students-table').bootstrapTable().on('click-row.bs.table', function(e, row, $element) {
                                                $('#student-id').val(row.id);
                                                $('#update-student-name').val(row.name);
                                                $('#update-student-division').val(row.division);
                                                $('#updateStudent').modal('toggle');
                                            });
                                        });
                                    </script>
                                </div>
                                <!-- New Student Modal -->
                                <div class="modal fade" id="newStudent" tabindex="-1" role="dialog" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                                <h4 class="modal-title">Add Student</h4>
                                            </div>
                                            <div class="modal-body">
                                                <form id="newStudentForm">
                                                    <div class="form-group">
                                                        <label class="control-label">Student Name</label>
                                                        <input id="new-student-name" type="text" class="form-control" name="name" placeholder="Firstname Lastname" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Division</label>
                                                        <select id="new-student-division" class="form-control">
                                                            <option>Elementary School</option>
                                                            <option>Middle School</option>
                                                            <option>High School</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <button type="button" onclick="putStudent()" class="btn btn-primary">
                                                            <span class="glyphicon glyphicon-plus"></span>
                                                            Add
                                                        </button>
                                                    </div>
                                                    <script>
                                                        function putStudent() {
                                                            $.ajax({
                                                                    url: '/teacher/students',
                                                                    type: 'PUT',
                                                                    data: {
                                                                        name: $('#new-student-name').val(),
                                                                        division: $('#new-student-division').val()
                                                                    },
                                                                    success: function(result) {
                                                                        $('#students-table').bootstrapTable('refresh');
                                                                        $('#newStudent').modal('toggle');
                                                                    }
                                                            });
                                                            $("#newStudentForm").trigger('reset');
                                                        }
                                                    </script>
                                                </form>
                                                <script type="text/javascript">
                                                    $(document).ready(function() {
                                                        $('#newStudentForm').bootstrapValidator({
                                                            fields: {
                                                                name: { 
                                                                    validators: {
                                                                        notEmpty: {
                                                                            message: 'Student name cannot be empty'
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        });
                                                    });
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Update Student Modal -->
                                <div class="modal fade" id="updateStudent" tabindex="-1" role="dialog" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                                <h4 class="modal-title">Update Student</h4>
                                            </div>
                                            <div class="modal-body">
                                                <form id="updateStudentForm">
                                                    <div class="form-group hidden" aria-hidden="true">
                                                        <label class="control-label">Student ID</label>
                                                        <input id="student-id" type="text" class="form-control" name="id" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Student Name</label>
                                                        <input id="update-student-name" type="text" class="form-control" name="name" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Division</label>
                                                        <select id="update-student-division" class="form-control">
                                                            <option>Elementary School</option>
                                                            <option>Middle School</option>
                                                            <option>High School</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <button type="button" onclick="deleteStudent()" class="btn btn-danger pull-right">
                                                            <span class="glyphicon glyphicon-remove"></span>
                                                            Delete
                                                        </button>
                                                        <button type="button" onclick="postStudent()" class="btn btn-info">
                                                            <span class="glyphicon glyphicon-edit"></span>
                                                            Update
                                                        </button>
                                                    </div>
                                                    <script>
                                                        function deleteStudent() {
                                                            $.ajax({
                                                                    url: '/teacher/students',
                                                                    type: 'DELETE',
                                                                    data: {
                                                                        id: $('#student-id').val()
                                                                    },
                                                                    success: function(result) {
                                                                        $('#students-table').bootstrapTable('refresh');
                                                                        $('#updateStudent').modal('toggle');
                                                                    }
                                                            });
                                                        }

                                                        function postStudent() {
                                                            $.ajax({
                                                                    url: '/teacher/students',
                                                                    type: 'POST',
                                                                    data: {
                                                                        id: $('#student-id').val(),
                                                                        name: $('#update-student-name').val(),
                                                                        division: $('#update-student-division').val()
                                                                    },
                                                                    success: function(result) {
                                                                        $('#students-table').bootstrapTable('refresh');
                                                                        $('#updateStudent').modal('toggle');
                                                                    }
                                                            });
                                                        }
                                                    </script>
                                                </form>
                                                <script type="text/javascript">
                                                    $(document).ready(function() {
                                                        $('#updateStudentForm').bootstrapValidator({
                                                            fields: {
                                                                name: { 
                                                                    validators: {
                                                                        notEmpty: {
                                                                            message: 'Student name cannot be empty'
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        });
                                                    });
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Teams Tab -->
                <div class="tab-pane fade" id="teams" role="tabpanel">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="bs-callout bs-callout-info">
                                <h4>Teams Instructions</h4>
                                <p>Register your teams' names and divisions first by clicking the <span class="text-primary">'Add Team'</span> button in the Overview header below for each team. Once you have provided the teams's name and school division (i.e. Elementary, Middle, High School), they will appear as a row in the Overview table for you to verify.</p>
                                <p>To register your students to a team, and to register a team to its competitions, click on the team's row. In the resultant dialogue, you may select your students and competitions. Using this dialogue, you may also update the name, student membership, and registered competitions of the team whenever needed, or you may delete the record entirely if necessary.</p>
                                <p><span class="text-warning">Note: </span>Only students registered with the same division as the team will appear in the student selection lists. If you mislabeled the division of your team, delete the record by clicking on it's row and clicking the <span class="text-danger">'Delete'</span> button in the resulting dialogue, then remake the team with the correct division through the <span class="text-primary">'Add Team'</span> dialogue.</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="btn-group pull-right">
                                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#newTeam">
                                            <span class="glyphicon glyphicon-plus"></span>
                                            Add Team
                                        </button>
                                    </div>
                                    <h5>Overview</h5>
                                </div>
                                <!-- Table -->
                                <div class="panel-body">
                                    <table id="teams-table" data-toggle="table" data-url="/teacher/teams-table" data-card-view="true" data-cache="false">
                                        <thead>
                                            <tr>
                                                <th data-field="id" data-visible="false">ID</th>
                                                <th data-field="name">Team Name</th>
                                                <th data-field="division">Division</th>
                                                <th data-field="student_names">Students</th>
                                                <th data-field="comp_names">Competitions</th>
                                            </tr>
                                        </thead>
                                    </table>
                                    <script>
                                        $(function() {
                                            $('#teams-table').bootstrapTable().on('click-row.bs.table', function(e, row, $element) {
                                                console.log(row);
                                                var students = row.student_ids.split(', ');
                                                var competitions = row.comp_ids.split(', ');
                                                $.ajax({
                                                    dataType: 'json',
                                                    url: '/teacher/students-division',
                                                    data: {
                                                        division: row.division
                                                    },
                                                    success: function(result) {
                                                        $('#update-team-students option').remove();
                                                        $.each(result, function() {
                                                            if(($.inArray(String(this.id), students)) > -1) {
                                                                $('#update-team-students').append($("<option/>", {
                                                                    value: this.id,
                                                                    selected: "selected",
                                                                    text: this.name
                                                                }));
                                                            } else {
                                                                $('#update-team-students').append($("<option/>", {
                                                                    value: this.id,
                                                                    text: this.name
                                                                }));
                                                            }
                                                        });
                                                        $('#update-team-students').bootstrapDualListbox('refresh');
                                                    }
                                                });
                                                $.ajax({
                                                    dataType: 'json',
                                                    url: '/api/competitions',
                                                    success: function(result) {
                                                        $('#update-team-competitions option').remove();
                                                        $.each(result, function() {
                                                            if(($.inArray(String(this.id), competitions)) > -1) {
                                                                $('#update-team-competitions').append($("<option/>", {
                                                                    value: this.id,
                                                                    selected: "selected",
                                                                    text: this.name
                                                                }));
                                                            } else {
                                                                $('#update-team-competitions').append($("<option/>", {
                                                                    value: this.id,
                                                                    text: this.name
                                                                }));
                                                            }
                                                        });
                                                        $('#update-team-competitions').bootstrapDualListbox('refresh');
                                                    }
                                                });
                                                $('#team-id').val(row.id);
                                                $('#update-team-name').val(row.name);
                                                $('#update-team-division').val(row.division);
                                                $('#updateTeam').modal('toggle');
                                            });
                                        });
                                    </script>
                                </div>
                                <!-- New Team Modal -->
                                <div class="modal fade" id="newTeam" tabindex="-1" role="dialog" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                                <h4 class="modal-title">Add Team</h4>
                                            </div>
                                            <div class="modal-body">
                                                <form id="newTeamForm">
                                                    <div class="form-group">
                                                        <label class="control-label">Team Name</label>
                                                        <input id="new-team-name" type="text" class="form-control" name="name" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Division</label>
                                                        <select id="new-team-division" class="form-control">
                                                            <option>Elementary School</option>
                                                            <option>Middle School</option>
                                                            <option>High School</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group">
                                                        <button type="button" onclick="putTeam()" class="btn btn-primary">
                                                            <span class="glyphicon glyphicon-plus"></span>
                                                            Add
                                                        </button>
                                                    </div>
                                                    <script>
                                                        function putTeam() {
                                                            $.ajax({
                                                                    url: '/teacher/teams',
                                                                    type: 'PUT',
                                                                    data: {
                                                                        name: $('#new-team-name').val(),
                                                                        division: $('#new-team-division').val()
                                                                    },
                                                                    success: function(result) {
                                                                        console.log(result);
                                                                        $('#teams-table').bootstrapTable('refresh');
                                                                        $('#newTeam').modal('toggle');
                                                                    }
                                                            });
                                                            $("#newTeamForm").trigger('reset');
                                                        }
                                                    </script>
                                                </form>
                                                <script type="text/javascript">
                                                    $(document).ready(function() {
                                                        $('#newTeamForm').bootstrapValidator({
                                                            fields: {
                                                                name: { 
                                                                    validators: {
                                                                        notEmpty: {
                                                                            message: 'Team name cannot be empty'
                                                                        },
                                                                        remote: {
                                                                            url: '/teacher/valid-teamname',
                                                                            message: 'There is already a team registered with this name'
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        });
                                                    });
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Update Team Modal -->
                                <div class="modal fade" id="updateTeam" tabindex="-1" role="dialog" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                                <h4 class="modal-title">Update Team</h4>
                                            </div>
                                            <div class="modal-body">
                                                <form id="updateTeamForm">
                                                    <div class="form-group hidden" aria-hidden="true">
                                                        <label class="control-label">Team ID</label>
                                                        <input id="team-id" type="text" class="form-control" name="id" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Team Name</label>
                                                        <input id="update-team-name" type="text" class="form-control" name="name" />
                                                    </div>
                                                    <div class="form-group hidden" aria-hidden="true">
                                                        <label class="control-label">Division</label>
                                                        <select id="update-team-division" class="form-control">
                                                            <option>Elementary School</option>
                                                            <option>Middle School</option>
                                                            <option>High School</option>
                                                        </select>
                                                    </div>
                                                    <hr>
                                                    <div class="form-group">
                                                        <select id="update-team-students" multiple="multiple" style="display: none;">
                                                        </select>
                                                        <span class="help-block">Select the students to include in this team by clicking on their names in the left-hand list above. You may remove a student from the team by clicking on their name in the right-hand list.</span>
                                                    </div>
                                                    <script type="text/javascript">
                                                        var updateStudents = $('#update-team-students').bootstrapDualListbox({
                                                                nonSelectedListLabel: 'Students List',
                                                                selectedListLabel: 'Team Members'
                                                        });
                                                    </script>
                                                    <hr>
                                                    <div class="form-group">
                                                        <select id="update-team-competitions" multiple="multiple" style="display: none;">
                                                        </select>
                                                        <span class="help-block">Select the competitions to enroll this team in by clicking on their names in the left-hand list above. You may un-enroll the team from competitions by clicking on the competition name in right-hand list.</span>
                                                    </div>
                                                    <script type="text/javascript">
                                                        var updateStudents = $('#update-team-competitions').bootstrapDualListbox({
                                                                nonSelectedListLabel: 'Competitions List',
                                                                selectedListLabel: 'Selected Competitions'
                                                        });
                                                    </script>
                                                    <div class="form-group">
                                                        <button type="button" onclick="deleteTeam()" class="btn btn-danger pull-right">
                                                            <span class="glyphicon glyphicon-remove"></span>
                                                            Delete
                                                        </button>
                                                        <button type="button" onclick="postTeam()" class="btn btn-info">
                                                            <span class="glyphicon glyphicon-edit"></span>
                                                            Update
                                                        </button>
                                                    </div>
                                                    <script>
                                                        function deleteTeam() {
                                                            $.ajax({
                                                                    url: '/teacher/teams',
                                                                    type: 'DELETE',
                                                                    data: {
                                                                        id: $('#team-id').val()
                                                                    },
                                                                    success: function(result) {
                                                                        console.log(result);
                                                                        $('#teams-table').bootstrapTable('refresh');
                                                                        $('#updateTeam').modal('toggle');
                                                                    }
                                                            });
                                                        }
                                                        function postTeam() {
                                                            console.log($('#team-id').val());
                                                            console.log($('#update-team-name').val());
                                                            console.log($('#update-team-division').val());
                                                            console.log($('#update-team-students').val());
                                                            console.log($('#update-team-competitions').val());
                                                            $.ajax({
                                                                    url: '/teacher/teams',
                                                                    type: 'POST',
                                                                    data: {
                                                                        id: $('#team-id').val(),
                                                                        name: $('#update-team-name').val(),
                                                                        division: $('#update-team-division').val(),
                                                                        students: $('#update-team-students').val(),
                                                                        competitions: $('#update-team-competitions').val()
                                                                    },
                                                                    success: function(result) {
                                                                        console.log(result);
                                                                        $('#teams-table').bootstrapTable('refresh');
                                                                        $('#updateTeam').modal('toggle');
                                                                    }
                                                            });
                                                        }
                                                    </script>
                                                </form>
                                                <script type="text/javascript">
                                                    $(document).ready(function() {
                                                        $('#updateTeamForm').bootstrapValidator({
                                                            fields: {
                                                                name: { 
                                                                    validators: {
                                                                        notEmpty: {
                                                                            message: 'Team name cannot be empty'
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        });
                                                    });
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Logistics Tab -->
                <div class="tab-pane fade" id="logistics" role="tabpanel">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="bs-callout bs-callout-info">
                                <h4>Logistics Instructions</h4>
                                <p>Logistics information will allow Expo's administrators to prepare for parking and attendance day-of the event. Please register the required Logistics information by clicking the <span class="text-primary">'Add Logistics'</span> button in the Overview header below. Once you have provided the information, it will appear as a row in the Overview table for you to verify.</p>
                                <p>Clicking on the row will open a dialog to edit the Logistics information or remove the record entirely if necessary.</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <div class="btn-group pull-right">
                                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#newLogistics">
                                            <span class="glyphicon glyphicon-plus"></span>
                                            Add Logistics
                                        </button>
                                    </div>
                                    <h5>Overview</h5>
                                </div>
                                <!-- Table -->
                                <div class="panel-body">
                                    <table id="logistics-table" data-toggle="table" data-url="/teacher/logistics" data-card-view="true" data-cache="false">
                                        <thead>
                                            <tr>
                                                <th data-field="id" data-visible="false">ID</th>
                                                <th data-field="num_cars">Number Cars</th>
                                                <th data-field="num_buses">Number Buses</th>
                                                <th data-field="attend_opening">Attending Opening?</th>
                                                <th data-field="leave_early">Leaving Early?</th>
                                                <th data-field="leave_time">Leave Time</th>
                                                <th data-field="num_lunches">Number Lunches</th>
                                                <th data-field="xsmall_ts">Number Extra Small T-Shirts</th>
                                                <th data-field="small_ts">Number Small T-Shirts</th>
                                                <th data-field="medium_ts">Number Medium T-Shirts</th>
                                                <th data-field="large_ts">Number Large T-Shirts</th>
                                                <th data-field="xlarge_ts">Number Extra Large T-Shirts</th>
                                            </tr>
                                        </thead>
                                    </table>
                                    <script>
                                        $(function() {
                                            $('#logistics-table').bootstrapTable().on('click-row.bs.table', function(e, row, $element) {
                                                $('#logistics-id').val(row.id);
                                                $('#update-logistics-num-cars').val(row.num_cars);
                                                $('#update-logistics-num-buses').val(row.num_buses);
                                                // Translate readable booleans to checkbox values
                                                var attend_opening = false;
                                                if (row.attend_opening == "Yes") {
                                                    attend_opening = true;
                                                }
                                                $('#update-logistics-attend-opening').prop('checked', attend_opening);
                                                var leave_early = false;
                                                if (row.leave_early == "Yes") {
                                                    leave_early = true;
                                                }
                                                $('#update-logistics-leave-early').prop('checked', leave_early);
                                                $('#update-logistics-leave-time').val(row.leave_time);
                                                $('#update-logistics-num-lunches').val(row.num_lunches);
                                                $('#update-logistics-xsmall-ts').val(row.xsmall_ts);
                                                $('#update-logistics-small-ts').val(row.small_ts);
                                                $('#update-logistics-medium-ts').val(row.medium_ts);
                                                $('#update-logistics-large-ts').val(row.large_ts);
                                                $('#update-logistics-xlarge-ts').val(row.xlarge_ts);
                                                $('#updateLogistics').modal('toggle');
                                            });
                                        });
                                    </script>
                                </div>
                                <!-- New Logistics Modal -->
                                <div class="modal fade" id="newLogistics" tabindex="-1" role="dialog" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                                <h4 class="modal-title">Add Logistics</h4>
                                            </div>
                                            <div class="modal-body">
                                                <form id="newLogisticsForm">
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Cars</label>
                                                        <input id="new-logistics-num-cars" type="text" class="form-control" name="numCars" />
                                                        <span class="help-block">How many cars (e.g. sedans, vans) will you be parking at KU campus?</span>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Buses</label>
                                                        <input id="new-logistics-num-buses" type="text" class="form-control" name="numBuses" />
                                                        <span class="help-block">How many buses will you be parking at KU campus?</span>

                                                    </div>
                                                    <div class="checkbox">
                                                        <label>
                                                            <input id="new-logistics-attend-opening" type="checkbox" name="attendOpening" /> Attending Opening
                                                        </label>
                                                        <span class="help-block">Do you plan on attending the opening ceremonies at the KU Lied Center for the days you come?</span>

                                                    </div>
                                                    <div class="checkbox">
                                                        <label>
                                                            <input id="new-logistics-leave-early" type="checkbox" name="leaveEarly" /> Leaving Early
                                                        </label>
                                                        <span class="help-block">Do you plan to leave Engineering Expo before the awards ceremonies for the days you come?</span>
                                                    </div>
                                                    <div id="new-time-field" class="input-append bootstrap-timepicker has-feedback">
                                                        <label class="control-label">Leave Time</label>
                                                        <input id="new-logistics-leave-time" type="text" class="form-control" name="leaveTime" placeholder="3:00 PM" />
                                                        <i class="glyphicon glyphicon-time form-control-feedback"></i>
                                                        <span class="help-block">What time do you plan on leaving?</span>
                                                    </div>
                                                    <script type="text/javascript">
                                                        $('#new-logistics-leave-time').timepicker({
                                                            template: false,
                                                            defaultTime: '3:00 PM' 
                                                        });
                                                    </script>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Lunches</label>
                                                        <input id="new-logistics-num-lunches" type="text" class="form-control" name="numLunches" />
                                                        <span class="help-block">How many lunches do you want to purchase? Engineering Expo can provide $3 lunches that include a hot dog, chips, and a soda.</span>

                                                    </div>
                                                    <hr>
                                                    <p>Indicate below the number of T-shirts for each size that you would like to purchase</p>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Small Extra T-Shirts</label>
                                                        <input id="new-logistics-xsmall-ts" type="text" class="form-control" name="xsmallTs" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Small T-Shirts</label>
                                                        <input id="new-logistics-small-ts" type="text" class="form-control" name="smallTs" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Medium T-Shirts</label>
                                                        <input id="new-logistics-medium-ts" type="text" class="form-control" name="mediumTs" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Large T-Shirts</label>
                                                        <input id="new-logistics-large-ts" type="text" class="form-control" name="largeTs" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Extra Large T-Shirts</label>
                                                        <input id="new-logistics-xlarge-ts" type="text" class="form-control" name="xlargeTs" />
                                                    </div>
                                                    <div class="form-group">
                                                        <button type="button" onclick="putLogistics()" class="btn btn-primary">
                                                            <span class="glyphicon glyphicon-plus"></span>
                                                            Add
                                                        </button>
                                                    </div>
                                                    <script>
                                                        function putLogistics() {
                                                            var new_attend_opening = 0;
                                                            if ($('#new-logistics-attend-opening').prop('checked')) {
                                                                new_attend_opening = 1;
                                                            }
                                                            var new_leave_early = 0;
                                                            if ($('#new-logistics-leave-early').prop('checked')) {
                                                                new_leave_early = 1;
                                                            }
                                                            $.ajax({
                                                                    url: '/teacher/logistics',
                                                                    type: 'PUT',
                                                                    data: {
                                                                        num_cars: $('#new-logistics-num-cars').val(),
                                                                        num_buses: $('#new-logistics-num-buses').val(),
                                                                        attend_opening: new_attend_opening,
                                                                        leave_early: new_leave_early,
                                                                        leave_time: $('#new-logistics-leave-time').val(),
                                                                        num_lunches: $('#new-logistics-num-lunches').val(),
                                                                        xsmall_ts: $('#new-logistics-xsmall-ts').val(),
                                                                        small_ts: $('#new-logistics-small-ts').val(),
                                                                        medium_ts: $('#new-logistics-medium-ts').val(),
                                                                        large_ts: $('#new-logistics-large-ts').val(),
                                                                        xlarge_ts: $('#new-logistics-xlarge-ts').val()
                                                                    },
                                                                    success: function(result) {
                                                                        $('#logistics-table').bootstrapTable('refresh');
                                                                        $('#newLogistics').modal('toggle');
                                                                    }
                                                            });
                                                            $("#newLogisticsForm").trigger('reset');
                                                        }
                                                    </script>
                                                </form>
                                                <script type="text/javascript">
                                                    $(document).ready(function() {
                                                        $('#newLogisticsForm').bootstrapValidator({
                                                            fields: {
                                                                numCars: { 
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                },
                                                                numBuses: {
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                },
                                                                numLunches: {
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                },
                                                                xsmallTs: {
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                },
                                                                smallTs: {
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                },
                                                                mediumTs: {
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                },
                                                                largeTs: {
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                },
                                                                xlargeTs: {
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        });
                                                    });
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Update Logistics Modal -->
                                <div class="modal fade" id="updateLogistics" tabindex="-1" role="dialog" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                    <span aria-hidden="true">&times;</span>
                                                </button>
                                                <h4 class="modal-title">Update Logistics</h4>
                                            </div>
                                            <div class="modal-body">
                                                <form id="updateLogisticsForm">
                                                    <div class="form-group hidden" aria-hidden="true">
                                                        <label class="control-label">Logistics ID</label>
                                                        <input id="logistics-id" type="text" class="form-control" name="id" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Cars</label>
                                                        <input id="update-logistics-num-cars" type="text" class="form-control" name="numCars" />
                                                        <span class="help-block">How many cars (e.g. sedans, vans) will you be parking at KU campus?</span>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Buses</label>
                                                        <input id="update-logistics-num-buses" type="text" class="form-control" name="numBuses" />
                                                        <span class="help-block">How many buses will you be parking at KU campus?</span>

                                                    </div>
                                                    <div class="checkbox">
                                                        <label>
                                                            <input id="update-logistics-attend-opening" type="checkbox" name="attend-opening" /> Attending Opening
                                                        </label>
                                                        <span class="help-block">Do you plan on attending the opening ceremonies at the KU Lied Center for the days you come?</span>

                                                    </div>
                                                    <div class="checkbox">
                                                        <label>
                                                            <input id="update-logistics-leave-early" type="checkbox" name="leave-early" /> Leaving Early
                                                        </label>
                                                        <span class="help-block">Do you plan to leave Engineering Expo before the awards ceremonies for the days you come?</span>
                                                    </div>
                                                    <div id="update-time-field" class="input-append bootstrap-timepicker has-feedback">
                                                        <label class="control-label">Leave Time</label>
                                                        <input id="update-logistics-leave-time" type="text" class="form-control" name="leaveTime" placeholder="3:00 PM" />
                                                        <i class="glyphicon glyphicon-time form-control-feedback"></i>
                                                        <span class="help-block">What time do you plan on leaving?</span>
                                                    </div>
                                                    <script type="text/javascript">
                                                        $('#update-logistics-leave-time').timepicker({
                                                            template: false,
                                                        });
                                                    </script>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Lunches</label>
                                                        <input id="update-logistics-num-lunches" type="text" class="form-control" name="numLunches" />
                                                        <span class="help-block">How many lunches do you want to purchase? Engineering Expo can provide $3 lunches that include a hot dog, chips, and a soda.</span>
                                                    </div>
                                                    <hr>
                                                    <p>Indicate below the number of T-shirts for each size that you would like to purchase</p>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Small Extra T-Shirts</label>
                                                        <input id="update-logistics-xsmall-ts" type="text" class="form-control" name="xsmallTs" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Small T-Shirts</label>
                                                        <input id="update-logistics-small-ts" type="text" class="form-control" name="smallTs" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Medium T-Shirts</label>
                                                        <input id="update-logistics-medium-ts" type="text" class="form-control" name="mediumTs" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Large T-Shirts</label>
                                                        <input id="update-logistics-large-ts" type="text" class="form-control" name="largeTs" />
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Number of Extra Large T-Shirts</label>
                                                        <input id="update-logistics-xlarge-ts" type="text" class="form-control" name="xlargeTs" />
                                                    </div>
                                                    <div class="form-group">
                                                        <button type="button" onclick="deleteLogistics()" class="btn btn-danger pull-right">
                                                            <span class="glyphicon glyphicon-remove"></span>
                                                            Delete
                                                        </button>
                                                        <button type="button" onclick="postLogistics()" class="btn btn-info">
                                                            <span class="glyphicon glyphicon-edit"></span>
                                                            Update
                                                        </button>
                                                    </div>
                                                    <script>
                                                        function deleteLogistics() {
                                                            $.ajax({
                                                                    url: '/teacher/logistics',
                                                                    type: 'DELETE',
                                                                    data: {
                                                                        id: $('#logistics-id').val()
                                                                    },
                                                                    success: function(result) {
                                                                        $('#logistics-table').bootstrapTable('refresh');
                                                                        $('#updateLogistics').modal('toggle');
                                                                    }
                                                            });
                                                        }
                                                        function postLogistics() {
                                                            var update_attend_opening = 0;
                                                            if ($('#update-logistics-attend-opening').prop('checked')) {
                                                                update_attend_opening = 1;
                                                            }
                                                            var update_leave_early = 0;
                                                            if ($('#update-logistics-leave-early').prop('checked')) {
                                                                update_leave_early = 1;
                                                            }
                                                            $.ajax({
                                                                    url: '/teacher/logistics',
                                                                    type: 'POST',
                                                                    data: {
                                                                        id: $('#logistics-id').val(),
                                                                        num_cars: $('#update-logistics-num-cars').val(),
                                                                        num_buses: $('#update-logistics-num-buses').val(),
                                                                        attend_opening: update_attend_opening,
                                                                        leave_early: update_leave_early,
                                                                        leave_time: $('#update-logistics-leave-time').val(),
                                                                        num_lunches: $('#update-logistics-num-lunches').val(),
                                                                        xsmall_ts: $('#update-logistics-xsmall-ts').val(),
                                                                        small_ts: $('#update-logistics-small-ts').val(),
                                                                        medium_ts: $('#update-logistics-medium-ts').val(),
                                                                        large_ts: $('#update-logistics-large-ts').val(),
                                                                        xlarge_ts: $('#update-logistics-xlarge-ts').val()
                                                                    },
                                                                    success: function(result) {
                                                                        $('#logistics-table').bootstrapTable('refresh');
                                                                        $('#updateLogistics').modal('toggle');
                                                                    }
                                                            });
                                                        }
                                                    </script>
                                                </form>
                                                <script type="text/javascript">
                                                    $(document).ready(function() {
                                                        $('#updateLogisticsForm').bootstrapValidator({
                                                            fields: {
                                                                numCars: { 
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                },
                                                                numBuses: {
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                },
                                                                numLunches: {
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                },
                                                                xsmallTs: {
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                },
                                                                smallTs: {
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                },
                                                                mediumTs: {
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                },
                                                                largeTs: {
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                },
                                                                xlargeTs: {
                                                                    validators: {
                                                                        integer: {
                                                                            message: 'Entry should be a number'
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        });
                                                    });
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
